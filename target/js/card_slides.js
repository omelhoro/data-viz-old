// Generated by CoffeeScript 1.8.0
(function() {
  var $;

  $ = jQuery;

  $(function() {
    var Session;
    Session = (function() {
      function Session(data) {
        this.data = data;
        this.present_words();
        this.present_pics();
      }

      Session.prototype.present_words = function() {
        var k, listItem, word, wordList, words, _, _i, _len;
        words = (function() {
          var _ref, _results;
          _ref = this.data[0];
          _results = [];
          for (k in _ref) {
            _ = _ref[k];
            if (k !== "part") {
              _results.push(k);
            }
          }
          return _results;
        }).call(this);
        wordList = $("<ol></ol>");
        for (_i = 0, _len = words.length; _i < _len; _i++) {
          word = words[_i];
          listItem = $("<li class='card_slide' id='" + word + "'>" + word + "</li>");
          wordList.append(listItem);
        }
        return $("#word_list").append(wordList);
      };

      Session.prototype._get_stats = function(word) {
        var group11, group15, obj, _i, _len, _ref;
        group11 = 0;
        group15 = 0;
        _ref = this.data;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          obj = _ref[_i];
          if (obj["part"].startsWith("112")) {
            group11 += parseInt(obj[word]);
          } else {
            group15 += parseInt(obj[word]);
          }
        }
        return {
          group11: Math.floor((group11 / 18) * 100),
          group15: Math.floor((group15 / 18) * 100)
        };
      };

      Session.prototype.present_pics = function() {
        var onHover, outHover;
        onHover = (function(_this) {
          return function(e) {
            var freqWord, group11, group15, word;
            word = $(e.target).prop("id");
            $("#pic").append($("<img class='word_pic' width=200px height=200px src='data/gallery/" + word + ".jpg'>"));
            freqWord = _this._get_stats(word);
            group11 = $("<span class='word_freq' id='freq11'>" + freqWord['group11'] + "%</span>");
            group15 = $("<span class='word_freq' id='freq15'>" + freqWord['group15'] + "%</span>");
            return ($("#stats").append(group11)).append(group15);
          };
        })(this);
        outHover = function(e) {
          $(".word_pic").remove();
          return $("#stats").children().remove();
        };
        return $(".card_slide").hover(onHover, outHover);
      };

      return Session;

    })();
    return d3.csv("data/card_slides.csv", function(data) {
      var session;
      return session = new Session(data);
    });
  });

}).call(this);

//# sourceMappingURL=card_slides.js.map
