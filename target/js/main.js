// Generated by CoffeeScript 1.8.0
(function() {
  var $, MAPS, append_map, chart_wrapper, create_menu, instant, menu, subchoice,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  $ = jQuery;

  MAPS = {
    kosovo_tree: ["Kosovo-Tree", ['', "html_"]],
    maxqda_docs: ["Respect-Docs", ["", 'html_']],
    syllables: ["Syllables", ['d3', "html_"]],
    lima_design: ["Lima Project", ['', 'html_']],
    heatplot: ["Cards", ["d3", 'html_']],
    lima_corpus: ["Child Corpus", ['d3', "html"]],
    rhythm: ["Rhythm", ['d3', 'html_']],
    vot: ["VOT", ["d3 TODO: fixplot", 'html']],
    formants: ["Formants", ["d3", 'html_']],
    cv_plot: ["CV-related", ["", 'html_']]
  };

  menu = $(".viz_menu");

  chart_wrapper = $("#chart_wrapper");

  append_map = function(target, el) {
    var content, dir, dom_target, js_lnk, js_target, name, viz_class, _ref, _ref1;
    chart_wrapper.empty();
    _ref = MAPS[target], name = _ref[0], (_ref1 = _ref[1], viz_class = _ref1[0], content = _ref1[1]);
    dom_target = $("<div id=template></div>");
    chart_wrapper.append(dom_target);
    dom_target.prop("class", "").prop("style", "");
    js_target = target.split("_of")[0];
    js_lnk = $("<script type='text/javascript' src='target/js/" + js_target + ".js'></script>");
    dom_target.addClass(viz_class);
    ($('.nav > li')).each(function(i, e) {
      return ($(e)).removeClass('active');
    });
    if (el != null) {
      el.addClass("active");
    }
    if (content.indexOf("html") === 0) {
      dir = content[4] === "j" ? 'target' : 'templates';
      content = content.slice(5);
      $.get("" + dir + "/" + js_target + ".html", function(d) {
        return dom_target.html(d);
      });
    }
    return chart_wrapper.append($(content));
  };

  create_menu = function(sub_choice, instant) {
    var filter_choice, k, l, lead_to, v;
    lead_to = function(target, el) {
      var lead;
      lead = function(e) {
        return append_map(target, el);
      };
      return lead;
    };
    filter_choice = sub_choice.length === 0 ? Object.keys(MAPS) : sub_choice;
    if (sub_choice.length === 1) {
      $(".navbar").remove();
      append_map(sub_choice[0]);
    }
    for (k in MAPS) {
      v = MAPS[k];
      if (__indexOf.call(filter_choice, k) >= 0) {
        l = $("<li id=" + k + "><a href='#'>" + v[0] + "</a></li>");
        l.click(lead_to(k, l));
        menu.append(l);
      }
    }
    if (__indexOf.call(filter_choice, instant) >= 0) {
      return ($("#" + instant)).click();
    } else {
      return ($("li", menu)).first().click();
    }
  };

  $(".jswarning").remove();

  subchoice = parent.viz_choice;

  instant = 'kosovo_tree';

  if (subchoice != null) {
    create_menu(subchoice, instant);
  } else {
    create_menu([], instant);
  }

}).call(this);

//# sourceMappingURL=main.js.map
